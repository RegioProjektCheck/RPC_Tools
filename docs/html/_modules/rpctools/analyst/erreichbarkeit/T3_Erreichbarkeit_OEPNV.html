<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>rpctools.analyst.erreichbarkeit.T3_Erreichbarkeit_OEPNV &#8212; RPC Profi</title>
    
    <link rel="stylesheet" href="../../../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">RPC</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../index.html" accesskey="U">Module code</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for rpctools.analyst.erreichbarkeit.T3_Erreichbarkeit_OEPNV</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="c1"># ---------------------------------------------------------------------------</span>
<span class="c1"># REGIOPROJEKTCHECK</span>
<span class="c1"># 03_Erreichbarkeit_OEPNV.py</span>
<span class="c1">#</span>
<span class="c1"># Description:</span>
<span class="c1"># PROJECT URL: http://www.regioprojektcheck.de</span>
<span class="c1">#</span>
<span class="c1"># Author:</span>
<span class="c1"># HCU Hamburg</span>
<span class="c1">#</span>
<span class="c1"># LICENSE: The MIT License (MIT) Copyright (c) 2014 RPC Consortium</span>
<span class="c1"># ---------------------------------------------------------------------------</span>


<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">urllib</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">gc</span>
<span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">operator</span>

<span class="kn">import</span> <span class="nn">arcpy</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib.font_manager</span> <span class="k">import</span> <span class="n">FontProperties</span>
<span class="kn">from</span> <span class="nn">matplotlib.ticker</span> <span class="k">import</span>  <span class="n">FuncFormatter</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">os.path</span> <span class="k">import</span> <span class="n">join</span>


<div class="viewcode-block" id="main"><a class="viewcode-back" href="../../../../rpctools/rpctools.analyst.erreichbarkeit.T3_Erreichbarkeit_OEPNV.html#rpctools.analyst.erreichbarkeit.T3_Erreichbarkeit_OEPNV.main">[docs]</a><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="n">messages</span><span class="p">):</span>
    <span class="c1">#---------------------------------------------------------------------------------------</span>
    <span class="c1"># Unicode</span>
    <span class="k">def</span> <span class="nf">_callback</span><span class="p">(</span><span class="n">matches</span><span class="p">):</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="n">matches</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">unichr</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">id</span><span class="p">))</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">id</span>

    <span class="k">def</span> <span class="nf">decode_unicode_references</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;&amp;#(\d+)(;|(?=\s))&quot;</span><span class="p">,</span> <span class="n">_callback</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>



    <span class="c1">#--------------------------------------------------------------------------------------------------</span>
    <span class="c1"># Abfahrt</span>
    <span class="k">class</span> <span class="nc">Verkehrsmittel</span><span class="p">:</span>
        <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">verkehrsmittel</span><span class="o">=</span><span class="p">[]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ziel</span> <span class="o">=</span><span class="p">[]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uhrzeit</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">escape1</span><span class="p">(</span><span class="n">html</span><span class="p">):</span>
        <span class="n">rueck</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">for</span> <span class="n">usd</span> <span class="ow">in</span> <span class="n">html</span><span class="p">:</span>
            <span class="n">usd</span><span class="o">=</span><span class="n">usd</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;ISO-8859-1&#39;</span><span class="p">)</span>
            <span class="n">usd</span><span class="o">=</span><span class="n">usd</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="n">usd</span><span class="o">=</span> <span class="n">decode_unicode_references</span><span class="p">(</span><span class="n">usd</span><span class="p">)</span>
            <span class="n">usd</span><span class="o">=</span> <span class="n">usd</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
            <span class="n">rueck</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">usd</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">rueck</span>
    <span class="c1">#----------------------------------------------------------------------------------------------------------------------------------------------</span>
    <span class="c1"># Abfahrtfunktion f√ºr Barcode</span>
    <span class="k">def</span> <span class="nf">Abfahrt</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span><span class="n">projektname</span><span class="p">,</span><span class="n">Daten</span><span class="p">):</span>

        <span class="n">workspace_projekt_wertveraenderung</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span><span class="s1">&#39;3 Benutzerdefinierte Projekte&#39;</span><span class="p">,</span><span class="n">projektname</span><span class="p">,</span><span class="s1">&#39;FGDB_Erreichbarkeit.gdb&#39;</span><span class="p">)</span>

        <span class="n">fahrzeug_array_alle_Haltestellen</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="n">Daten</span><span class="p">:</span>

            <span class="n">str1</span><span class="o">=</span><span class="s1">&#39;&amp;gt;&amp;gt;&#39;</span>
            <span class="n">str2</span><span class="o">=</span><span class="s1">&#39;&lt;span class=&quot;bold&quot;&gt;&#39;</span>

            <span class="nb">max</span><span class="o">=</span><span class="s2">&quot;99999&quot;</span>
            <span class="n">evaID</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">z</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="c1">##        print z[0]</span>
            <span class="n">f</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="s2">&quot;http://mobile.bahn.de/bin/mobil/bhftafel.exe/dox?evaId=&quot;</span><span class="o">+</span><span class="n">evaID</span><span class="o">+</span><span class="s2">&quot;&amp;bt=dep&amp;max=&quot;</span><span class="o">+</span><span class="nb">max</span><span class="o">+</span><span class="s2">&quot;&amp;p=1111111111&amp;start=1&amp;time=00.00&amp;time_end=23.59&quot;</span><span class="p">)</span>
    <span class="c1">##        print(&quot;http://mobile.bahn.de/bin/mobil/bhftafel.exe/dox?evaId=&quot;+evaID+&quot;&amp;bt=dep&amp;max=&quot;+max+&quot;&amp;p=1111111111&amp;start=1&amp;time=00.00&amp;time_end=23.59&quot;)</span>
            <span class="n">uhrzeit_falsch</span><span class="o">=</span><span class="p">[]</span>
            <span class="n">uhrzeit</span><span class="o">=</span><span class="p">[]</span>
            <span class="n">verkehrsmittel</span><span class="o">=</span><span class="p">[]</span>
            <span class="n">ziel</span><span class="o">=</span><span class="p">[]</span>
            <span class="n">bla</span><span class="o">=</span><span class="p">[]</span>

            <span class="n">uu</span><span class="o">=</span><span class="mi">0</span>
            <span class="k">for</span> <span class="n">zeilen</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">uu</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
                    <span class="n">ziel</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">zeilen</span><span class="p">)</span>
                    <span class="n">uu</span><span class="o">=</span><span class="mi">0</span>

                <span class="k">if</span> <span class="n">zeilen</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">str1</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                    <span class="n">uu</span><span class="o">=</span><span class="mi">1</span>

                <span class="k">if</span> <span class="n">zeilen</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">str2</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                    <span class="n">bla</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">zeilen</span><span class="p">)</span>
                    <span class="n">m</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">r&quot;&gt;[0-9][0-9]:[0-9][0-9]&lt;&quot;</span><span class="p">,</span><span class="n">zeilen</span><span class="p">)</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">m</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
                        <span class="n">uhrzeit_falsch</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
                        <span class="n">bla</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">zeilen</span><span class="p">)</span>
            <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">uhrzeit_falsch</span><span class="p">:</span>
                <span class="n">uhrzeit</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&gt;&#39;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;&#39;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">))</span>

            <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">bla</span><span class="p">:</span>
                <span class="n">test</span><span class="o">=</span><span class="n">h</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;span class=&quot;bold&quot;&gt;&#39;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;/span&gt;&#39;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">test</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">2</span><span class="p">:</span>
                    <span class="n">verkehrsmittel</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">test</span><span class="p">)</span>

            <span class="n">ziel</span> <span class="o">=</span> <span class="n">escape1</span><span class="p">(</span><span class="n">ziel</span><span class="p">)</span>

            <span class="n">gefunden</span><span class="o">=</span><span class="mi">0</span>
            <span class="n">i</span><span class="o">=</span><span class="mi">0</span>
            <span class="n">fahrzeug_array</span><span class="o">=</span> <span class="p">[]</span>
            <span class="n">fahrzeug</span> <span class="o">=</span> <span class="n">Verkehrsmittel</span><span class="p">()</span>
            <span class="k">while</span><span class="p">(</span><span class="n">i</span><span class="o">&lt;</span><span class="nb">len</span><span class="p">(</span><span class="n">verkehrsmittel</span><span class="p">)):</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">i</span><span class="o">==</span><span class="mi">0</span><span class="p">):</span>
                    <span class="n">fahrzeug</span><span class="o">.</span><span class="n">verkehrsmittel</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">verkehrsmittel</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                    <span class="c1">#decode es als utf-8 und excel geht wieder</span>
                    <span class="n">fahrzeug</span><span class="o">.</span><span class="n">ziel</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ziel</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;String_Escape&#39;</span><span class="p">))</span>
                    <span class="n">fahrzeug</span><span class="o">.</span><span class="n">uhrzeit</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">uhrzeit</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                    <span class="n">fahrzeug_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fahrzeug</span><span class="p">)</span>
                    <span class="n">gefunden</span><span class="o">=</span><span class="mi">1</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">fahrzeug_array</span><span class="p">:</span>

                        <span class="k">if</span><span class="p">(</span><span class="n">verkehrsmittel</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">==</span><span class="nb">str</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">verkehrsmittel</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;[&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;]&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">))</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ziel</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span><span class="o">==</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">ziel</span><span class="p">)):</span>
                            <span class="n">h</span><span class="o">.</span><span class="n">uhrzeit</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">uhrzeit</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                            <span class="n">gefunden</span><span class="o">=</span><span class="mi">1</span>

                    <span class="k">if</span><span class="p">(</span><span class="n">gefunden</span><span class="o">==</span><span class="mi">0</span><span class="p">):</span>
                        <span class="n">fahrzeug</span> <span class="o">=</span> <span class="n">Verkehrsmittel</span><span class="p">()</span>
                        <span class="n">fahrzeug</span><span class="o">.</span><span class="n">verkehrsmittel</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">verkehrsmittel</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                        <span class="n">fahrzeug</span><span class="o">.</span><span class="n">ziel</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ziel</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;String_Escape&#39;</span><span class="p">))</span>
                        <span class="n">fahrzeug</span><span class="o">.</span><span class="n">uhrzeit</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">uhrzeit</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                        <span class="n">fahrzeug_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fahrzeug</span><span class="p">)</span>

                <span class="n">i</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span>
                <span class="n">gefunden</span><span class="o">=</span><span class="mi">0</span>

            <span class="k">del</span> <span class="n">uhrzeit</span> <span class="p">,</span> <span class="n">uhrzeit_falsch</span><span class="p">,</span><span class="n">bla</span><span class="p">,</span><span class="n">ziel</span><span class="p">,</span> <span class="n">i</span>

            <span class="n">fahrzeug_array_alle_Haltestellen</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fahrzeug_array</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">fahrzeug_array_alle_Haltestellen</span>
    <span class="c1">#----------------------------------------------------------------------------------------------------------------------------------------------</span>
    <span class="c1"># Alte Abfahrt funktion</span>
    <span class="k">def</span> <span class="nf">Abfahrt2</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span><span class="n">projektname</span><span class="p">,</span><span class="n">Daten</span><span class="p">):</span>

        <span class="n">workspace_projekt_wertveraenderung</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span><span class="s1">&#39;3 Benutzerdefinierte Projekte&#39;</span><span class="p">,</span><span class="n">projektname</span><span class="p">,</span><span class="s1">&#39;FGDB_Erreichbarkeit.gdb&#39;</span><span class="p">)</span>
        <span class="n">workspace_projekt_ergebnisse</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span><span class="s1">&#39;3 Benutzerdefinierte Projekte&#39;</span><span class="p">,</span><span class="n">projektname</span><span class="p">,</span> <span class="s1">&#39;Ergebnisausgabe&#39;</span><span class="p">,</span> <span class="s1">&#39;Abbildungen&#39;</span><span class="p">)</span>
        <span class="n">myfile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">workspace_projekt_ergebnisse</span><span class="o">+</span><span class="s2">&quot;/Informationen_Abfahrt.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span>
        <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">myfile</span><span class="p">,</span><span class="n">dialect</span><span class="o">=</span><span class="s1">&#39;excel&#39;</span><span class="p">,</span><span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="n">trenn</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;;&#39;</span><span class="p">]</span>


        <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="n">Daten</span><span class="p">:</span>

            <span class="n">str1</span><span class="o">=</span><span class="s1">&#39;&amp;gt;&amp;gt;&#39;</span>
            <span class="n">str2</span><span class="o">=</span><span class="s1">&#39;&lt;span class=&quot;bold&quot;&gt;&#39;</span>

            <span class="nb">max</span><span class="o">=</span><span class="s2">&quot;99999&quot;</span>
            <span class="n">evaID</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">z</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">((</span><span class="nb">repr</span><span class="p">(</span><span class="n">z</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;String_Escape&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;u&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">z</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)))</span>

            <span class="n">f</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="s2">&quot;http://mobile.bahn.de/bin/mobil/bhftafel.exe/dox?evaId=&quot;</span><span class="o">+</span><span class="n">evaID</span><span class="o">+</span><span class="s2">&quot;&amp;bt=dep&amp;max=&quot;</span><span class="o">+</span><span class="nb">max</span><span class="o">+</span><span class="s2">&quot;&amp;start=1&amp;time=00.00&amp;time_end=23.59&amp;disableEquivs=yes&quot;</span><span class="p">)</span>
    <span class="c1">##        print(&quot;http://mobile.bahn.de/bin/mobil/bhftafel.exe/dox?evaId=&quot;+evaID+&quot;&amp;bt=dep&amp;max=&quot;+max+&quot;&amp;start=1&amp;time=00.00&amp;time_end=23.59&amp;disableEquivs=yes&quot;)</span>
            <span class="n">uhrzeit_falsch</span><span class="o">=</span><span class="p">[]</span>
            <span class="n">uhrzeit</span><span class="o">=</span><span class="p">[]</span>
            <span class="n">verkehrsmittel</span><span class="o">=</span><span class="p">[]</span>
            <span class="n">ziel</span><span class="o">=</span><span class="p">[]</span>
            <span class="n">bla</span><span class="o">=</span><span class="p">[]</span>

            <span class="n">uu</span><span class="o">=</span><span class="mi">0</span>
            <span class="k">for</span> <span class="n">zeilen</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">uu</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
                    <span class="n">ziel</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">zeilen</span><span class="p">)</span>
                    <span class="n">uu</span><span class="o">=</span><span class="mi">0</span>

                <span class="k">if</span> <span class="n">zeilen</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">str1</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                    <span class="n">uu</span><span class="o">=</span><span class="mi">1</span>

                <span class="k">if</span> <span class="n">zeilen</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">str2</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                    <span class="n">bla</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">zeilen</span><span class="p">)</span>
                    <span class="n">m</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">r&quot;&gt;[0-9][0-9]:[0-9][0-9]&lt;&quot;</span><span class="p">,</span><span class="n">zeilen</span><span class="p">)</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">m</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
                        <span class="n">uhrzeit_falsch</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
                        <span class="n">bla</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">zeilen</span><span class="p">)</span>
            <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">uhrzeit_falsch</span><span class="p">:</span>
                <span class="n">uhrzeit</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&gt;&#39;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;&#39;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">))</span>

            <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">bla</span><span class="p">:</span>
                <span class="n">test</span><span class="o">=</span><span class="n">h</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;span class=&quot;bold&quot;&gt;&#39;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;/span&gt;&#39;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">test</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">2</span><span class="p">:</span>
                    <span class="n">verkehrsmittel</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">test</span><span class="p">)</span>

            <span class="n">ziel</span> <span class="o">=</span> <span class="n">escape1</span><span class="p">(</span><span class="n">ziel</span><span class="p">)</span>

            <span class="n">gefunden</span><span class="o">=</span><span class="mi">0</span>
            <span class="n">i</span><span class="o">=</span><span class="mi">0</span>
            <span class="n">fahrzeug_array</span><span class="o">=</span> <span class="p">[]</span>
            <span class="n">fahrzeug</span> <span class="o">=</span> <span class="n">Verkehrsmittel</span><span class="p">()</span>
            <span class="k">while</span><span class="p">(</span><span class="n">i</span><span class="o">&lt;</span><span class="nb">len</span><span class="p">(</span><span class="n">verkehrsmittel</span><span class="p">)):</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">i</span><span class="o">==</span><span class="mi">0</span><span class="p">):</span>
                    <span class="n">fahrzeug</span><span class="o">.</span><span class="n">verkehrsmittel</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">verkehrsmittel</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                    <span class="n">fahrzeug</span><span class="o">.</span><span class="n">ziel</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ziel</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>

                    <span class="n">fahrzeug</span><span class="o">.</span><span class="n">uhrzeit</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">uhrzeit</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                    <span class="n">fahrzeug_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fahrzeug</span><span class="p">)</span>
                    <span class="n">gefunden</span><span class="o">=</span><span class="mi">1</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">fahrzeug_array</span><span class="p">:</span>
                        <span class="k">if</span><span class="p">(</span><span class="n">verkehrsmittel</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">==</span><span class="nb">str</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">verkehrsmittel</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;[&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;]&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">))</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ziel</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span><span class="o">==</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">ziel</span><span class="p">)):</span>
                            <span class="n">h</span><span class="o">.</span><span class="n">uhrzeit</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">uhrzeit</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                            <span class="n">gefunden</span><span class="o">=</span><span class="mi">1</span>

                    <span class="k">if</span><span class="p">(</span><span class="n">gefunden</span><span class="o">==</span><span class="mi">0</span><span class="p">):</span>
                        <span class="n">fahrzeug</span> <span class="o">=</span> <span class="n">Verkehrsmittel</span><span class="p">()</span>
                        <span class="n">fahrzeug</span><span class="o">.</span><span class="n">verkehrsmittel</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">verkehrsmittel</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                        <span class="n">fahrzeug</span><span class="o">.</span><span class="n">ziel</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ziel</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>
                        <span class="n">fahrzeug</span><span class="o">.</span><span class="n">uhrzeit</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">uhrzeit</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                        <span class="n">fahrzeug_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fahrzeug</span><span class="p">)</span>

                <span class="n">i</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span>
                <span class="n">gefunden</span><span class="o">=</span><span class="mi">0</span>

            <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">fahrzeug_array</span><span class="p">:</span>
                <span class="n">ptime</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
                <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">a</span><span class="o">.</span><span class="n">uhrzeit</span><span class="p">:</span>
                    <span class="n">ptime</span><span class="o">+=</span><span class="nb">str</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">trenn</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

                <span class="n">blib</span><span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">ziel</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;String_Escape&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;u&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
                <span class="n">bla2</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">verkehrsmittel</span> <span class="o">+</span> <span class="n">trenn</span>
                <span class="n">bla2</span> <span class="o">=</span> <span class="n">bla2</span> <span class="o">+</span> <span class="n">blib</span>
                <span class="n">bla2</span> <span class="o">=</span> <span class="n">bla2</span> <span class="o">+</span> <span class="n">trenn</span> <span class="o">+</span><span class="nb">list</span><span class="p">(</span><span class="n">ptime</span><span class="p">)</span>

                <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">bla2</span><span class="p">)</span>
                <span class="k">del</span> <span class="n">ptime</span>

            <span class="k">del</span> <span class="n">uhrzeit</span> <span class="p">,</span> <span class="n">uhrzeit_falsch</span><span class="p">,</span><span class="n">verkehrsmittel</span><span class="p">,</span><span class="n">bla</span><span class="p">,</span><span class="n">ziel</span><span class="p">,</span><span class="n">fahrzeug_array</span><span class="p">,</span>  <span class="n">i</span> <span class="p">,</span><span class="n">fahrzeug</span><span class="o">.</span><span class="n">uhrzeit</span><span class="p">,</span><span class="n">fahrzeug</span><span class="o">.</span><span class="n">verkehrsmittel</span><span class="p">,</span><span class="n">fahrzeug</span><span class="o">.</span><span class="n">ziel</span>
            <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

        <span class="n">myfile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">del</span> <span class="n">writer</span><span class="p">,</span><span class="n">myfile</span>
    <span class="c1">#--------------------------------------------------------------------------------------------------</span>
    <span class="c1"># Ankunft</span>
    <span class="k">def</span> <span class="nf">Ankunft</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span><span class="n">projektname</span><span class="p">,</span><span class="n">Daten</span><span class="p">):</span>

        <span class="n">workspace_projekt_wertveraenderung</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span><span class="s1">&#39;3 Benutzerdefinierte Projekte&#39;</span><span class="p">,</span><span class="n">projektname</span><span class="p">,</span><span class="s1">&#39;FGDB_Erreichbarkeit.gdb&#39;</span><span class="p">)</span>

        <span class="n">myfile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">workspace_projekt_ergebnisse</span><span class="o">+</span><span class="s2">&quot;/Informationen_Ankunft.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span>
        <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">myfile</span><span class="p">,</span><span class="n">dialect</span><span class="o">=</span><span class="s1">&#39;excel&#39;</span><span class="p">,</span><span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="n">trenn</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;;&#39;</span><span class="p">]</span>


        <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="n">Daten</span><span class="p">:</span>

            <span class="n">str1</span><span class="o">=</span><span class="s1">&#39;&amp;lt;&amp;lt;&#39;</span>
            <span class="n">str2</span><span class="o">=</span><span class="s1">&#39;&lt;span class=&quot;bold&quot;&gt;&#39;</span>

            <span class="nb">max</span><span class="o">=</span><span class="s2">&quot;99999&quot;</span>
            <span class="n">evaID</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">z</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">((</span><span class="nb">repr</span><span class="p">(</span><span class="n">z</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;String_Escape&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;u&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">z</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)))</span>

            <span class="n">f</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="s2">&quot;http://mobile.bahn.de/bin/mobil/bhftafel.exe/dox?evaId=&quot;</span><span class="o">+</span><span class="n">evaID</span><span class="o">+</span><span class="s2">&quot;&amp;bt=arr&amp;max=&quot;</span><span class="o">+</span><span class="nb">max</span><span class="o">+</span><span class="s2">&quot;&amp;start=1&amp;time=00.00&amp;time_end=23.59&amp;disableEquivs=yes&quot;</span><span class="p">)</span>
            <span class="n">uhrzeit_falsch</span><span class="o">=</span><span class="p">[]</span>
            <span class="n">uhrzeit</span><span class="o">=</span><span class="p">[]</span>
            <span class="n">verkehrsmittel</span><span class="o">=</span><span class="p">[]</span>
            <span class="n">ziel</span><span class="o">=</span><span class="p">[]</span>
            <span class="n">bla</span><span class="o">=</span><span class="p">[]</span>

            <span class="n">uu</span><span class="o">=</span><span class="mi">0</span>
            <span class="k">for</span> <span class="n">zeilen</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">uu</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
                    <span class="n">ziel</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">zeilen</span><span class="p">)</span>
                    <span class="n">uu</span><span class="o">=</span><span class="mi">0</span>

                <span class="k">if</span> <span class="n">zeilen</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">str1</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                    <span class="n">uu</span><span class="o">=</span><span class="mi">1</span>

                <span class="k">if</span> <span class="n">zeilen</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">str2</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                    <span class="n">bla</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">zeilen</span><span class="p">)</span>
                    <span class="n">m</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">r&quot;&gt;[0-9][0-9]:[0-9][0-9]&lt;&quot;</span><span class="p">,</span><span class="n">zeilen</span><span class="p">)</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">m</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
                        <span class="n">uhrzeit_falsch</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
                        <span class="n">bla</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">zeilen</span><span class="p">)</span>

            <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">uhrzeit_falsch</span><span class="p">:</span>
                <span class="n">uhrzeit</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&gt;&#39;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;&#39;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">))</span>

            <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">bla</span><span class="p">:</span>
                <span class="n">test</span><span class="o">=</span><span class="n">h</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;span class=&quot;bold&quot;&gt;&#39;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;/span&gt;&#39;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">test</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">2</span><span class="p">:</span>
                    <span class="n">verkehrsmittel</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">test</span><span class="p">)</span>

            <span class="n">ziel</span> <span class="o">=</span> <span class="n">escape1</span><span class="p">(</span><span class="n">ziel</span><span class="p">)</span>
            <span class="n">gefunden</span><span class="o">=</span><span class="mi">0</span>
            <span class="n">i</span><span class="o">=</span><span class="mi">0</span>
            <span class="n">fahrzeug_array</span><span class="o">=</span> <span class="p">[]</span>
            <span class="n">fahrzeug</span> <span class="o">=</span> <span class="n">Verkehrsmittel</span><span class="p">()</span>

            <span class="c1"># Struktur Verkehrsmittel Ziel Uhrzeit Uhrzeit UhrzeitUhrzeitUhrzeit Uhrzeit</span>

            <span class="k">while</span><span class="p">(</span><span class="n">i</span><span class="o">&lt;</span><span class="nb">len</span><span class="p">(</span><span class="n">verkehrsmittel</span><span class="p">)):</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">i</span><span class="o">==</span><span class="mi">0</span><span class="p">):</span>
                    <span class="n">fahrzeug</span><span class="o">.</span><span class="n">verkehrsmittel</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">verkehrsmittel</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                    <span class="n">fahrzeug</span><span class="o">.</span><span class="n">ziel</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ziel</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>
    <span class="c1">##                fahrzeug.ziel.append(ziel[0])</span>
                    <span class="n">fahrzeug</span><span class="o">.</span><span class="n">uhrzeit</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">uhrzeit</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                    <span class="n">fahrzeug_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fahrzeug</span><span class="p">)</span>
                    <span class="n">gefunden</span><span class="o">=</span><span class="mi">1</span>
    <span class="c1">##                print str(fahrzeug.ziel).decode(&#39;String_Escape&#39;)</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">fahrzeug_array</span><span class="p">:</span>

                        <span class="k">if</span><span class="p">(</span><span class="n">verkehrsmittel</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">==</span><span class="nb">str</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">verkehrsmittel</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;[&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;]&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">))</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ziel</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span><span class="o">==</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">ziel</span><span class="p">)):</span>
                            <span class="n">h</span><span class="o">.</span><span class="n">uhrzeit</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">uhrzeit</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                            <span class="n">gefunden</span><span class="o">=</span><span class="mi">1</span>

                    <span class="k">if</span><span class="p">(</span><span class="n">gefunden</span><span class="o">==</span><span class="mi">0</span><span class="p">):</span>
                        <span class="n">fahrzeug</span> <span class="o">=</span> <span class="n">Verkehrsmittel</span><span class="p">()</span>
                        <span class="n">fahrzeug</span><span class="o">.</span><span class="n">verkehrsmittel</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">verkehrsmittel</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                        <span class="n">fahrzeug</span><span class="o">.</span><span class="n">ziel</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ziel</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>
                        <span class="n">fahrzeug</span><span class="o">.</span><span class="n">uhrzeit</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">uhrzeit</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                        <span class="n">fahrzeug_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fahrzeug</span><span class="p">)</span>
                <span class="n">i</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span>
                <span class="n">gefunden</span><span class="o">=</span><span class="mi">0</span>

            <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">fahrzeug_array</span><span class="p">:</span>
                <span class="n">ptime</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
                <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">a</span><span class="o">.</span><span class="n">uhrzeit</span><span class="p">:</span>
                    <span class="n">ptime</span><span class="o">+=</span><span class="nb">str</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">trenn</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

                <span class="n">blib</span><span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">ziel</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;String_Escape&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;u&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
                <span class="n">bla2</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">verkehrsmittel</span> <span class="o">+</span> <span class="n">trenn</span>
                <span class="n">bla2</span> <span class="o">=</span> <span class="n">bla2</span> <span class="o">+</span> <span class="n">blib</span>
                <span class="n">bla2</span> <span class="o">=</span> <span class="n">bla2</span> <span class="o">+</span> <span class="n">trenn</span> <span class="o">+</span><span class="nb">list</span><span class="p">(</span><span class="n">ptime</span><span class="p">)</span>

                <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">bla2</span><span class="p">)</span>
                <span class="k">del</span> <span class="n">ptime</span>

            <span class="k">del</span> <span class="n">uhrzeit</span> <span class="p">,</span> <span class="n">uhrzeit_falsch</span><span class="p">,</span><span class="n">verkehrsmittel</span><span class="p">,</span><span class="n">bla</span><span class="p">,</span><span class="n">ziel</span><span class="p">,</span><span class="n">fahrzeug_array</span><span class="p">,</span>  <span class="n">i</span> <span class="p">,</span><span class="n">fahrzeug</span><span class="o">.</span><span class="n">uhrzeit</span><span class="p">,</span><span class="n">fahrzeug</span><span class="o">.</span><span class="n">verkehrsmittel</span><span class="p">,</span><span class="n">fahrzeug</span><span class="o">.</span><span class="n">ziel</span>
            <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>


        <span class="n">myfile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">del</span> <span class="n">writer</span><span class="p">,</span><span class="n">myfile</span>
    <span class="c1">#-----------------------------------------------------------------------------------------------------------------------------------------------</span>
    <span class="c1">#Zeichne Barcode</span>
    <span class="k">def</span> <span class="nf">zeichne</span><span class="p">(</span><span class="n">timeline</span><span class="p">,</span><span class="n">lines</span><span class="p">,</span><span class="n">halte</span><span class="p">):</span>

        <span class="n">workspace_projekt_wertveraenderung</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span><span class="s1">&#39;3 Benutzerdefinierte Projekte&#39;</span><span class="p">,</span><span class="n">projektname</span><span class="p">,</span><span class="s1">&#39;FGDB_Erreichbarkeit.gdb&#39;</span><span class="p">)</span>
        <span class="n">workspace_projekt_ergebnisse</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span><span class="s1">&#39;3 Benutzerdefinierte Projekte&#39;</span><span class="p">,</span><span class="n">projektname</span><span class="p">,</span> <span class="s1">&#39;Ergebnisausgabe&#39;</span><span class="p">,</span> <span class="s1">&#39;Abbildungen&#39;</span><span class="p">)</span>
    <span class="c1">##    print halte</span>
        <span class="n">halte</span><span class="o">=</span> <span class="n">halte</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;(&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;)&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">unichr</span><span class="p">(</span><span class="mi">228</span><span class="p">),</span><span class="s1">&#39;ae&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">unichr</span><span class="p">(</span><span class="mi">246</span><span class="p">),</span><span class="s1">&#39;oe&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">unichr</span><span class="p">(</span><span class="mi">252</span><span class="p">),</span><span class="s1">&#39;ue&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">unichr</span><span class="p">(</span><span class="mi">223</span><span class="p">),</span><span class="s1">&#39;ss&#39;</span><span class="p">)</span>
    <span class="c1">##    print halte</span>
        <span class="n">fig</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>

    <span class="c1">##    print len (timeline)</span>
        <span class="n">ax</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">611</span><span class="p">,</span><span class="n">axisbg</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="n">p1</span><span class="o">=</span><span class="p">[]</span>

        <span class="n">Farben</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;#E41a1c&quot;</span><span class="p">,</span> <span class="s2">&quot;#377EB8&quot;</span><span class="p">,</span> <span class="s2">&quot;#4DAF4A&quot;</span><span class="p">,</span> <span class="s2">&quot;#984EA3&quot;</span><span class="p">,</span> <span class="s2">&quot;#FF7F00&quot;</span><span class="p">,</span> <span class="s2">&quot;#FFFF33&quot;</span><span class="p">,</span> <span class="s2">&quot;#A65628&quot;</span><span class="p">,</span> <span class="s2">&quot;#F781BF&quot;</span><span class="p">]</span> <span class="c1"># Using color brewer color scheme: http://colorbrewer2.org/?type=qualitative&amp;scheme=Set1&amp;n=8</span>
        <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">timeline</span><span class="p">):</span>

                <span class="n">Datenarray</span> <span class="o">=</span> <span class="n">a</span>
                <span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">Datenarray</span><span class="p">)</span>
                <span class="n">ind</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>      <span class="c1"># the x locations for the groups</span>
                <span class="n">width</span> <span class="o">=</span> <span class="mi">1</span>               <span class="c1"># the width of the bars: can also be len(x) sequence</span>
                <span class="n">p1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">ind</span><span class="p">,</span> <span class="n">Datenarray</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">0</span> <span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="n">Farben</span><span class="p">[</span><span class="n">x</span><span class="p">],</span><span class="n">label</span><span class="o">=</span><span class="n">unicode</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="n">x</span><span class="p">])</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;String_escape&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))))</span>

        <span class="n">handles</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_legend_handles_labels</span><span class="p">()</span>

        <span class="n">fontP</span> <span class="o">=</span> <span class="n">FontProperties</span><span class="p">()</span>
        <span class="n">fontP</span><span class="o">.</span><span class="n">set_size</span><span class="p">(</span><span class="s1">&#39;small&#39;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">labels</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper center&#39;</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.3</span><span class="p">),</span> <span class="n">prop</span> <span class="o">=</span> <span class="n">fontP</span><span class="p">,</span> <span class="n">fancybox</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">shadow</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">get_yaxis</span><span class="p">()</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">N</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">72</span><span class="p">,</span><span class="mi">96</span><span class="p">,</span><span class="mi">120</span><span class="p">,</span><span class="mi">144</span><span class="p">,</span><span class="mi">168</span><span class="p">,</span><span class="mi">192</span><span class="p">,</span><span class="mi">216</span><span class="p">,</span><span class="mi">240</span><span class="p">,</span><span class="mi">264</span><span class="p">,</span><span class="mi">288</span><span class="p">])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">get_xaxis</span><span class="p">()</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">FuncFormatter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">*</span><span class="mi">5</span><span class="o">/</span><span class="mi">60</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;:&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="p">)</span> <span class="p">))</span>

        <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">workspace_projekt_ergebnisse</span><span class="o">+</span><span class="s2">&quot;/&quot;</span><span class="o">+</span><span class="n">halte</span><span class="o">+</span><span class="s2">&quot;.png&quot;</span><span class="p">,</span><span class="n">pad_inches</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">dpi</span><span class="o">=</span><span class="mi">464</span><span class="p">,</span><span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>

        <span class="n">plt</span><span class="o">.</span><span class="n">clf</span><span class="p">()</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">clf</span><span class="p">()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">del</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="p">,</span> <span class="n">p1</span>
        <span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>


    <span class="c1">#-----------------------------------------------------------------------------------------------------------------------------------------------</span>
    <span class="c1">#Eerstellen der Barcodes bzw vorher entscheidung welches Diagramm erstellt werden soll</span>
    <span class="k">def</span> <span class="nf">erstellen_der_timelines</span><span class="p">(</span><span class="n">fahrzeug_array_b</span><span class="p">,</span><span class="n">Daten</span><span class="p">):</span>

        <span class="n">Kategorie1_Verkehrsmittel</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;ALT&quot;</span><span class="p">,</span><span class="s2">&quot;AST&quot;</span><span class="p">,</span><span class="s2">&quot;BSV&quot;</span><span class="p">,</span><span class="s2">&quot;BUS&quot;</span><span class="p">,</span><span class="s2">&quot;BYB&quot;</span><span class="p">,</span><span class="s2">&quot;BZB&quot;</span><span class="p">,</span><span class="s2">&quot;CAT&quot;</span><span class="p">,</span><span class="s2">&quot;DZ&quot;</span><span class="p">,</span><span class="s2">&quot;EXB&quot;</span>
                                    <span class="p">,</span><span class="s2">&quot;FAE&quot;</span><span class="p">,</span><span class="s2">&quot;KAT&quot;</span><span class="p">,</span><span class="s2">&quot;KD&quot;</span><span class="p">,</span><span class="s2">&quot;KTB&quot;</span><span class="p">,</span><span class="s2">&quot;LEO&quot;</span><span class="p">,</span><span class="s2">&quot;LT&quot;</span><span class="p">,</span><span class="s2">&quot;MBB&quot;</span><span class="p">,</span><span class="s2">&quot;MEL&quot;</span><span class="p">,</span><span class="s2">&quot;MSB&quot;</span>
                                    <span class="p">,</span><span class="s2">&quot;OBU&quot;</span><span class="p">,</span><span class="s2">&quot;PRE&quot;</span><span class="p">,</span><span class="s2">&quot;RFB&quot;</span><span class="p">,</span><span class="s2">&quot;SB&quot;</span><span class="p">,</span><span class="s2">&quot;SCH&quot;</span><span class="p">,</span><span class="s2">&quot;SDG&quot;</span><span class="p">,</span><span class="s2">&quot;SOE&quot;</span><span class="p">,</span><span class="s2">&quot;UBU&quot;</span><span class="p">,</span><span class="s2">&quot;UEF&quot;</span>
                                    <span class="p">,</span><span class="s2">&quot;WKD&quot;</span><span class="p">,</span><span class="s2">&quot;ZRB&quot;</span><span class="p">]</span>
        <span class="n">Kategorie2_Verkehrsmittel</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;HSB&quot;</span><span class="p">,</span><span class="s2">&quot;RNV&quot;</span><span class="p">,</span><span class="s2">&quot;STR&quot;</span><span class="p">,</span><span class="s2">&quot;SWB&quot;</span><span class="p">]</span>
        <span class="n">Kategorie3_Verkehrsmittel</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;ABR&quot;</span><span class="p">,</span><span class="s2">&quot;ag&quot;</span><span class="p">,</span><span class="s2">&quot;AKN&quot;</span><span class="p">,</span><span class="s2">&quot;ALX&quot;</span><span class="p">,</span><span class="s2">&quot;ANB&quot;</span><span class="p">,</span><span class="s2">&quot;ARR&quot;</span><span class="p">,</span><span class="s2">&quot;AVG&quot;</span><span class="p">,</span><span class="s2">&quot;BLB&quot;</span><span class="p">,</span><span class="s2">&quot;BOB&quot;</span><span class="p">,</span><span class="s2">&quot;BRB&quot;</span>
                                    <span class="p">,</span><span class="s2">&quot;BSB&quot;</span><span class="p">,</span><span class="s2">&quot;CAN&quot;</span><span class="p">,</span><span class="s2">&quot;CB&quot;</span><span class="p">,</span><span class="s2">&quot;DAB&quot;</span><span class="p">,</span><span class="s2">&quot;DBG&quot;</span><span class="p">,</span><span class="s2">&quot;DPN&quot;</span><span class="p">,</span><span class="s2">&quot;DWE&quot;</span><span class="p">,</span><span class="s2">&quot;EB&quot;</span><span class="p">,</span><span class="s2">&quot;Ebx&quot;</span>
                                    <span class="p">,</span><span class="s2">&quot;EB/Ebx&quot;</span><span class="p">,</span><span class="s2">&quot;ERB&quot;</span><span class="p">,</span><span class="s2">&quot;erixx&quot;</span><span class="p">,</span><span class="s2">&quot;EVB&quot;</span><span class="p">,</span><span class="s2">&quot;HEX&quot;</span><span class="p">,</span><span class="s2">&quot;HLB&quot;</span><span class="p">,</span><span class="s2">&quot;HTB&quot;</span><span class="p">,</span><span class="s2">&quot;HzL&quot;</span>
                                    <span class="p">,</span><span class="s2">&quot;IP&quot;</span><span class="p">,</span><span class="s2">&quot;KM&quot;</span><span class="p">,</span><span class="s2">&quot;ME&quot;</span><span class="p">,</span><span class="s2">&quot;MEr&quot;</span><span class="p">,</span><span class="s2">&quot;MR&quot;</span><span class="p">,</span><span class="s2">&quot;MRB&quot;</span><span class="p">,</span><span class="s2">&quot;N&quot;</span><span class="p">,</span><span class="s2">&quot;NBE&quot;</span><span class="p">,</span><span class="s2">&quot;NEB&quot;</span><span class="p">,</span><span class="s2">&quot;NEG&quot;</span>
                                    <span class="p">,</span><span class="s2">&quot;NOB&quot;</span><span class="p">,</span><span class="s2">&quot;NWB&quot;</span><span class="p">,</span><span class="s2">&quot;OE&quot;</span><span class="p">,</span><span class="s2">&quot;OLA&quot;</span><span class="p">,</span><span class="s2">&quot;OS&quot;</span><span class="p">,</span><span class="s2">&quot;OSB&quot;</span><span class="p">,</span><span class="s2">&quot;PEG&quot;</span><span class="p">,</span><span class="s2">&quot;R&quot;</span><span class="p">,</span><span class="s2">&quot;R84&quot;</span><span class="p">,</span><span class="s2">&quot;RAB&quot;</span>
                                    <span class="p">,</span><span class="s2">&quot;RB&quot;</span><span class="p">,</span><span class="s2">&quot;RB/RE&quot;</span><span class="p">,</span><span class="s2">&quot;RE&quot;</span><span class="p">,</span><span class="s2">&quot;RER&quot;</span><span class="p">,</span><span class="s2">&quot;REX&quot;</span><span class="p">,</span><span class="s2">&quot;RSB&quot;</span><span class="p">,</span><span class="s2">&quot;RT&quot;</span><span class="p">,</span><span class="s2">&quot;RTB&quot;</span><span class="p">,</span><span class="s2">&quot;S&quot;</span><span class="p">,</span><span class="s2">&quot;S28&quot;</span>
                                    <span class="p">,</span><span class="s2">&quot;SBS&quot;</span><span class="p">,</span><span class="s2">&quot;SHB&quot;</span><span class="p">,</span><span class="s2">&quot;SKM&quot;</span><span class="p">,</span><span class="s2">&quot;SKW&quot;</span><span class="p">,</span><span class="s2">&quot;STB&quot;</span><span class="p">,</span><span class="s2">&quot;T84&quot;</span><span class="p">,</span><span class="s2">&quot;U&quot;</span><span class="p">,</span><span class="s2">&quot;UBB&quot;</span><span class="p">,</span><span class="s2">&quot;VBG&quot;</span><span class="p">,</span><span class="s2">&quot;VEC&quot;</span>
                                    <span class="p">,</span><span class="s2">&quot;VIA&quot;</span><span class="p">,</span><span class="s2">&quot;WFB&quot;</span><span class="p">]</span>
        <span class="n">Kategorie4_Verkehrsmittel</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;AIR&quot;</span><span class="p">,</span><span class="s2">&quot;ALS&quot;</span><span class="p">,</span><span class="s2">&quot;ARC&quot;</span><span class="p">,</span><span class="s2">&quot;ARN&quot;</span><span class="p">,</span><span class="s2">&quot;ARZ&quot;</span><span class="p">,</span><span class="s2">&quot;AS&quot;</span><span class="p">,</span><span class="s2">&quot;ATB&quot;</span><span class="p">,</span><span class="s2">&quot;ATR&quot;</span><span class="p">,</span><span class="s2">&quot;AVE&quot;</span><span class="p">,</span><span class="s2">&quot;AZ&quot;</span>
                                    <span class="p">,</span><span class="s2">&quot;CNL&quot;</span><span class="p">,</span><span class="s2">&quot;D&quot;</span><span class="p">,</span><span class="s2">&quot;DB&quot;</span><span class="p">,</span><span class="s2">&quot;DNZ&quot;</span><span class="p">,</span><span class="s2">&quot;DPF&quot;</span><span class="p">,</span><span class="s2">&quot;E&quot;</span><span class="p">,</span><span class="s2">&quot;EC&quot;</span><span class="p">,</span><span class="s2">&quot;ECB&quot;</span><span class="p">,</span><span class="s2">&quot;ECW&quot;</span><span class="p">,</span><span class="s2">&quot;EE&quot;</span><span class="p">,</span><span class="s2">&quot;EIC&quot;</span>
                                    <span class="p">,</span><span class="s2">&quot;EM&quot;</span><span class="p">,</span><span class="s2">&quot;EN&quot;</span><span class="p">,</span><span class="s2">&quot;ES&quot;</span><span class="p">,</span><span class="s2">&quot;EST&quot;</span><span class="p">,</span><span class="s2">&quot;EX&quot;</span><span class="p">,</span><span class="s2">&quot;EZ&quot;</span><span class="p">,</span><span class="s2">&quot;FB&quot;</span><span class="p">,</span><span class="s2">&quot;FYR&quot;</span><span class="p">,</span><span class="s2">&quot;HKX&quot;</span><span class="p">,</span><span class="s2">&quot;HOT&quot;</span><span class="p">,</span><span class="s2">&quot;IC&quot;</span>
                                    <span class="p">,</span><span class="s2">&quot;ICB&quot;</span><span class="p">,</span><span class="s2">&quot;ICE&quot;</span><span class="p">,</span><span class="s2">&quot;ICN&quot;</span><span class="p">,</span><span class="s2">&quot;ICR&quot;</span><span class="p">,</span><span class="s2">&quot;ICT&quot;</span><span class="p">,</span><span class="s2">&quot;ICX&quot;</span><span class="p">,</span><span class="s2">&quot;INT&quot;</span><span class="p">,</span><span class="s2">&quot;INZ&quot;</span><span class="p">,</span><span class="s2">&quot;IR&quot;</span><span class="p">,</span><span class="s2">&quot;IRE&quot;</span><span class="p">,</span><span class="s2">&quot;IRN&quot;</span>
                                    <span class="p">,</span><span class="s2">&quot;IRX&quot;</span><span class="p">,</span><span class="s2">&quot;IXB&quot;</span><span class="p">,</span><span class="s2">&quot;IXK&quot;</span><span class="p">,</span><span class="s2">&quot;LYN&quot;</span><span class="p">,</span><span class="s2">&quot;NEX&quot;</span><span class="p">,</span><span class="s2">&quot;NZ&quot;</span><span class="p">,</span><span class="s2">&quot;OEC&quot;</span><span class="p">,</span><span class="s2">&quot;OIC&quot;</span><span class="p">,</span><span class="s2">&quot;OZ&quot;</span><span class="p">,</span><span class="s2">&quot;PCC&quot;</span><span class="p">,</span><span class="s2">&quot;RHI&quot;</span>
                                    <span class="p">,</span><span class="s2">&quot;RHT&quot;</span><span class="p">,</span><span class="s2">&quot;RJ&quot;</span><span class="p">,</span><span class="s2">&quot;RR&quot;</span><span class="p">,</span><span class="s2">&quot;RRI&quot;</span><span class="p">,</span><span class="s2">&quot;RRT&quot;</span><span class="p">,</span><span class="s2">&quot;S2&quot;</span><span class="p">,</span><span class="s2">&quot;S84&quot;</span><span class="p">,</span><span class="s2">&quot;SBB&quot;</span><span class="p">,</span><span class="s2">&quot;SC&quot;</span><span class="p">,</span><span class="s2">&quot;SP&quot;</span><span class="p">,</span><span class="s2">&quot;TGD&quot;</span>
                                    <span class="p">,</span><span class="s2">&quot;TGV&quot;</span><span class="p">,</span><span class="s2">&quot;THA&quot;</span><span class="p">,</span><span class="s2">&quot;TLG&quot;</span><span class="p">,</span><span class="s2">&quot;TLK&quot;</span><span class="p">,</span><span class="s2">&quot;U70&quot;</span><span class="p">,</span><span class="s2">&quot;UEX&quot;</span><span class="p">,</span><span class="s2">&quot;UUU&quot;</span><span class="p">,</span><span class="s2">&quot;VX&quot;</span><span class="p">,</span><span class="s2">&quot;X&quot;</span><span class="p">,</span><span class="s2">&quot;X2&quot;</span><span class="p">,</span><span class="s2">&quot;X70&quot;</span><span class="p">,</span><span class="s2">&quot;ZR&quot;</span>
                                    <span class="p">,</span><span class="s2">&quot;ZUG&quot;</span><span class="p">]</span>


        <span class="k">for</span> <span class="n">welche</span><span class="p">,</span> <span class="n">fahrzeug_array</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span> <span class="n">fahrzeug_array_b</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fahrzeug_array</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="c1">#verkehrstraeger</span>

            <span class="n">time5lines_verkehrstraeger</span><span class="o">=</span><span class="p">[]</span>
            <span class="n">verkehr</span><span class="o">=</span><span class="p">[]</span>
            <span class="n">nichtchecken</span><span class="o">=</span><span class="p">[]</span>

            <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span> <span class="n">fahrzeug_array</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span>  <span class="p">[</span><span class="n">ii</span> <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="n">nichtchecken</span><span class="p">]</span> <span class="ow">or</span> <span class="n">x</span><span class="o">==</span><span class="mi">0</span> <span class="p">:</span>
                    <span class="n">time5line</span><span class="o">=</span><span class="p">[]</span>

                    <span class="k">for</span> <span class="n">uu</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">288</span><span class="p">):</span>
                        <span class="n">time5line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                    <span class="n">wogefunden</span><span class="o">=</span><span class="p">[]</span>


                    <span class="n">mittel</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">verkehrsmittel</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

                    <span class="k">if</span> <span class="nb">len</span><span class="p">([</span><span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">Kategorie1_Verkehrsmittel</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">mittel</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()])</span><span class="o">&gt;</span><span class="mi">0</span>  <span class="p">:</span>
                        <span class="n">mittel</span><span class="o">=</span><span class="s2">&quot;Bus&quot;</span>
                    <span class="k">elif</span> <span class="nb">len</span><span class="p">([</span><span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">Kategorie2_Verkehrsmittel</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">mittel</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()])</span><span class="o">&gt;</span><span class="mi">0</span> <span class="p">:</span>
                        <span class="n">mittel</span><span class="o">=</span><span class="s2">&quot;Strassen- bzw. Stadtbahn&quot;</span>
                    <span class="k">elif</span> <span class="nb">len</span><span class="p">([</span><span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">Kategorie3_Verkehrsmittel</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">mittel</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()])</span><span class="o">&gt;</span><span class="mi">0</span> <span class="p">:</span>
                        <span class="n">mittel</span><span class="o">=</span><span class="s2">&quot;U , S - Bahn&quot;</span>
                    <span class="k">elif</span> <span class="nb">len</span><span class="p">([</span><span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">Kategorie4_Verkehrsmittel</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">mittel</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()])</span><span class="o">&gt;</span><span class="mi">0</span> <span class="p">:</span>
                        <span class="n">mittel</span><span class="o">=</span><span class="s2">&quot;Fernbahn&quot;</span>

                    <span class="n">gfind</span><span class="o">=</span><span class="mi">0</span>
                    <span class="k">for</span> <span class="n">y</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span> <span class="n">fahrzeug_array</span><span class="p">):</span>
                        <span class="n">mittel2</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">verkehrsmittel</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
                        <span class="k">if</span> <span class="nb">len</span><span class="p">([</span><span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">Kategorie1_Verkehrsmittel</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">mittel2</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()])</span><span class="o">&gt;</span><span class="mi">0</span>  <span class="p">:</span>
                            <span class="n">mittel2</span><span class="o">=</span><span class="s2">&quot;Bus&quot;</span>
                        <span class="k">elif</span> <span class="nb">len</span><span class="p">([</span><span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">Kategorie2_Verkehrsmittel</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">mittel2</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()])</span><span class="o">&gt;</span><span class="mi">0</span> <span class="p">:</span>
                            <span class="n">mittel2</span><span class="o">=</span><span class="s2">&quot;Strassen- bzw. Stadtbahn&quot;</span>
                        <span class="k">elif</span> <span class="nb">len</span><span class="p">([</span><span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">Kategorie3_Verkehrsmittel</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">mittel2</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()])</span><span class="o">&gt;</span><span class="mi">0</span> <span class="p">:</span>
                            <span class="n">mittel2</span><span class="o">=</span><span class="s2">&quot;U , S - Bahn&quot;</span>
                        <span class="k">elif</span> <span class="nb">len</span><span class="p">([</span><span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">Kategorie4_Verkehrsmittel</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">mittel2</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()])</span><span class="o">&gt;</span><span class="mi">0</span> <span class="p">:</span>
                            <span class="n">mittel2</span><span class="o">=</span><span class="s2">&quot;Fernbahn&quot;</span>

                        <span class="k">if</span>  <span class="n">mittel</span><span class="o">==</span><span class="n">mittel2</span> <span class="ow">and</span> <span class="n">x</span><span class="o">!=</span><span class="n">y</span><span class="p">:</span>
                            <span class="n">drinn</span><span class="o">=</span><span class="mi">0</span>
                            <span class="k">for</span> <span class="n">zz</span> <span class="ow">in</span> <span class="n">verkehr</span><span class="p">:</span>
                                <span class="k">if</span> <span class="n">mittel</span> <span class="o">==</span><span class="n">zz</span><span class="p">:</span>
                                    <span class="n">drinn</span><span class="o">=</span><span class="mi">1</span>
                            <span class="k">if</span> <span class="n">drinn</span> <span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                                <span class="n">verkehr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mittel</span><span class="p">)</span>
                            <span class="n">wogefunden</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
                            <span class="n">nichtchecken</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
                            <span class="n">gfind</span><span class="o">=</span><span class="mi">1</span>
                    <span class="k">if</span> <span class="n">gfind</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                        <span class="n">verkehr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mittel</span><span class="p">)</span>
                    <span class="n">ptime</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
                    <span class="k">for</span> <span class="n">woo</span> <span class="ow">in</span> <span class="n">wogefunden</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">bk</span> <span class="ow">in</span> <span class="n">fahrzeug_array</span><span class="p">[</span><span class="n">woo</span><span class="p">]</span><span class="o">.</span><span class="n">uhrzeit</span><span class="p">:</span>
                            <span class="n">ptime</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">bk</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
                            <span class="n">split</span> <span class="o">=</span> <span class="n">ptime</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
                            <span class="n">time5line</span><span class="p">[((</span><span class="nb">int</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">*</span><span class="mi">60</span><span class="p">)</span><span class="o">/</span><span class="mi">5</span><span class="p">)</span><span class="o">+</span><span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">/</span><span class="mi">5</span><span class="p">))]</span><span class="o">=</span><span class="mi">1</span>
                    <span class="k">for</span> <span class="n">bl</span> <span class="ow">in</span> <span class="n">a</span><span class="o">.</span><span class="n">uhrzeit</span><span class="p">:</span>
                            <span class="n">ptime</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">bl</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
                            <span class="n">split</span> <span class="o">=</span> <span class="n">ptime</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
                            <span class="n">time5line</span><span class="p">[((</span><span class="nb">int</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">*</span><span class="mi">60</span><span class="p">)</span><span class="o">/</span><span class="mi">5</span><span class="p">)</span><span class="o">+</span><span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">/</span><span class="mi">5</span><span class="p">))]</span><span class="o">=</span><span class="mi">1</span>

                    <span class="n">time5lines_verkehrstraeger</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">time5line</span><span class="p">)</span>

            <span class="n">time5lines_ziel</span><span class="o">=</span><span class="p">[]</span>
            <span class="n">ziele</span><span class="o">=</span><span class="p">[]</span>
            <span class="n">nichtchecken</span><span class="o">=</span><span class="p">[]</span>

            <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span> <span class="n">fahrzeug_array</span><span class="p">):</span>

                <span class="k">if</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span>  <span class="p">[</span><span class="n">ii</span> <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="n">nichtchecken</span><span class="p">]</span> <span class="ow">or</span> <span class="n">x</span><span class="o">==</span><span class="mi">0</span> <span class="p">:</span>
                    <span class="n">time5line</span><span class="o">=</span><span class="p">[]</span>

                    <span class="k">for</span> <span class="n">uu</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">288</span><span class="p">):</span>
                        <span class="n">time5line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                    <span class="n">wogefunden</span><span class="o">=</span><span class="p">[]</span>


                    <span class="k">for</span> <span class="n">y</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span> <span class="n">fahrzeug_array</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">ziel</span> <span class="o">==</span> <span class="n">b</span><span class="o">.</span><span class="n">ziel</span> <span class="ow">and</span> <span class="n">x</span><span class="o">!=</span><span class="n">y</span><span class="p">:</span>
                            <span class="n">wogefunden</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
                            <span class="n">nichtchecken</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

                    <span class="n">ptime</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
                    <span class="k">for</span> <span class="n">woo</span> <span class="ow">in</span> <span class="n">wogefunden</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">bk</span> <span class="ow">in</span> <span class="n">fahrzeug_array</span><span class="p">[</span><span class="n">woo</span><span class="p">]</span><span class="o">.</span><span class="n">uhrzeit</span><span class="p">:</span>
                            <span class="n">ptime</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">bk</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
                            <span class="n">split</span> <span class="o">=</span> <span class="n">ptime</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
                            <span class="n">time5line</span><span class="p">[((</span><span class="nb">int</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">*</span><span class="mi">60</span><span class="p">)</span><span class="o">/</span><span class="mi">5</span><span class="p">)</span><span class="o">+</span><span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">/</span><span class="mi">5</span><span class="p">))]</span><span class="o">=</span><span class="mi">1</span>
                    <span class="k">for</span> <span class="n">bl</span> <span class="ow">in</span> <span class="n">a</span><span class="o">.</span><span class="n">uhrzeit</span><span class="p">:</span>

                            <span class="n">ptime</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">bl</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
                            <span class="n">split</span> <span class="o">=</span> <span class="n">ptime</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
                            <span class="n">time5line</span><span class="p">[((</span><span class="nb">int</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">*</span><span class="mi">60</span><span class="p">)</span><span class="o">/</span><span class="mi">5</span><span class="p">)</span><span class="o">+</span><span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">/</span><span class="mi">5</span><span class="p">))]</span><span class="o">=</span><span class="mi">1</span>
                    <span class="n">ziele</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">ziel</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">))</span>
                    <span class="n">time5lines_ziel</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">time5line</span><span class="p">)</span>

            <span class="nb">print</span> <span class="s2">&quot;Ziel &quot;</span><span class="p">,</span> <span class="n">ziele</span>

            <span class="c1">#Linie</span>

            <span class="n">time5lines_linie</span><span class="o">=</span><span class="p">[]</span>
            <span class="n">lines</span><span class="o">=</span><span class="p">[]</span>
            <span class="n">nichtchecken</span><span class="o">=</span><span class="p">[]</span>
            <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span> <span class="n">fahrzeug_array</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span>  <span class="p">[</span><span class="n">ii</span> <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="n">nichtchecken</span><span class="p">]</span> <span class="ow">or</span> <span class="n">x</span><span class="o">==</span><span class="mi">0</span> <span class="p">:</span>
                    <span class="n">time5line</span><span class="o">=</span><span class="p">[]</span>

                    <span class="k">for</span> <span class="n">uu</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">288</span><span class="p">):</span>
                        <span class="n">time5line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                    <span class="n">wogefunden</span><span class="o">=</span><span class="p">[]</span>


                    <span class="n">mittel</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">verkehrsmittel</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="s1">&#39;MEr&#39;</span> <span class="ow">in</span> <span class="n">mittel</span><span class="p">:</span>
                        <span class="n">mittel</span><span class="o">=</span><span class="s1">&#39;Fernzug&#39;</span>
                    <span class="k">elif</span> <span class="s1">&#39;CNL&#39;</span> <span class="ow">in</span> <span class="n">mittel</span><span class="p">:</span>
                        <span class="n">mittel</span><span class="o">=</span><span class="s1">&#39;Fernzug&#39;</span>
                    <span class="k">elif</span> <span class="s1">&#39;IC&#39;</span> <span class="ow">in</span> <span class="n">mittel</span><span class="p">:</span>
                        <span class="n">mittel</span><span class="o">=</span><span class="s1">&#39;Fernzug&#39;</span>
                    <span class="k">elif</span> <span class="s1">&#39;ICE&#39;</span> <span class="ow">in</span> <span class="n">mittel</span><span class="p">:</span>
                        <span class="n">mittel</span><span class="o">=</span><span class="s1">&#39;Fernzug&#39;</span>
                    <span class="k">elif</span> <span class="s1">&#39;EC&#39;</span> <span class="ow">in</span> <span class="n">mittel</span><span class="p">:</span>
                        <span class="n">mittel</span><span class="o">=</span><span class="s1">&#39;Fernzug&#39;</span>
                    <span class="k">elif</span> <span class="s1">&#39;HKX&#39;</span> <span class="ow">in</span> <span class="n">mittel</span><span class="p">:</span>
                        <span class="n">mittel</span><span class="o">=</span><span class="s1">&#39;Fernzug&#39;</span>
                    <span class="k">elif</span> <span class="s1">&#39;EN&#39;</span> <span class="ow">in</span> <span class="n">mittel</span><span class="p">:</span>
                        <span class="n">mittel</span><span class="o">=</span><span class="s1">&#39;Fernzug&#39;</span>
                    <span class="k">elif</span> <span class="s1">&#39;E&#39;</span> <span class="ow">in</span> <span class="n">mittel</span><span class="p">:</span>
                        <span class="n">mittel</span><span class="o">=</span><span class="s1">&#39;Fernzug&#39;</span>
                    <span class="k">elif</span> <span class="s1">&#39;D&#39;</span> <span class="ow">in</span> <span class="n">mittel</span><span class="p">:</span>
                        <span class="n">mittel</span><span class="o">=</span><span class="s1">&#39;Fernzug&#39;</span>

                    <span class="n">gfind</span><span class="o">=</span><span class="mi">0</span>
                    <span class="k">for</span> <span class="n">y</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span> <span class="n">fahrzeug_array</span><span class="p">):</span>
                        <span class="n">mittel2</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
                        <span class="k">if</span> <span class="s1">&#39;MEr&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">verkehrsmittel</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
                            <span class="n">mittel2</span><span class="o">=</span><span class="s1">&#39;Fernzug&#39;</span>
                        <span class="k">if</span> <span class="s1">&#39;CNL&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">verkehrsmittel</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
                            <span class="n">mittel2</span><span class="o">=</span><span class="s1">&#39;Fernzug&#39;</span>
                        <span class="k">if</span> <span class="s1">&#39;IC&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">verkehrsmittel</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
                            <span class="n">mittel2</span><span class="o">=</span><span class="s1">&#39;Fernzug&#39;</span>
                        <span class="k">if</span> <span class="s1">&#39;ICE&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">verkehrsmittel</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
                            <span class="n">mittel2</span><span class="o">=</span><span class="s1">&#39;Fernzug&#39;</span>
                        <span class="k">if</span> <span class="s1">&#39;EC&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">verkehrsmittel</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
                            <span class="n">mittel2</span><span class="o">=</span><span class="s1">&#39;Fernzug&#39;</span>
                        <span class="k">if</span> <span class="s1">&#39;HKX&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">verkehrsmittel</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
                            <span class="n">mittel2</span><span class="o">=</span><span class="s1">&#39;Fernzug&#39;</span>
                        <span class="k">if</span> <span class="s1">&#39;EN&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">verkehrsmittel</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
                            <span class="n">mittel2</span><span class="o">=</span><span class="s1">&#39;Fernzug&#39;</span>
                        <span class="k">if</span> <span class="s1">&#39;E&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">verkehrsmittel</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
                            <span class="n">mittel2</span><span class="o">=</span><span class="s1">&#39;Fernzug&#39;</span>
                        <span class="k">if</span> <span class="s1">&#39;D&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">verkehrsmittel</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
                            <span class="n">mittel2</span><span class="o">=</span><span class="s1">&#39;Fernzug&#39;</span>
                        <span class="k">if</span> <span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">verkehrsmittel</span> <span class="o">==</span> <span class="n">b</span><span class="o">.</span><span class="n">verkehrsmittel</span> <span class="ow">or</span> <span class="n">mittel</span><span class="o">==</span><span class="n">mittel2</span><span class="p">)</span> <span class="ow">and</span> <span class="n">x</span><span class="o">!=</span><span class="n">y</span><span class="p">:</span>
                            <span class="n">drinn</span><span class="o">=</span><span class="mi">0</span>
                            <span class="k">for</span> <span class="n">zz</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
                                <span class="k">if</span> <span class="n">mittel</span> <span class="o">==</span><span class="n">zz</span> <span class="ow">or</span> <span class="n">a</span><span class="o">.</span><span class="n">verkehrsmittel</span><span class="o">==</span><span class="n">zz</span><span class="p">:</span>
                                    <span class="n">drinn</span><span class="o">=</span><span class="mi">1</span>
                            <span class="k">if</span> <span class="n">drinn</span> <span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                                <span class="k">if</span> <span class="s1">&#39;MEr&#39;</span> <span class="ow">in</span> <span class="n">a</span><span class="o">.</span><span class="n">verkehrsmittel</span> <span class="ow">or</span> <span class="s1">&#39;CNL&#39;</span> <span class="ow">in</span> <span class="n">a</span><span class="o">.</span><span class="n">verkehrsmittel</span> <span class="ow">or</span> <span class="s1">&#39;IC&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">verkehrsmittel</span><span class="p">)</span><span class="ow">or</span> <span class="s1">&#39;ICE&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">verkehrsmittel</span><span class="p">)</span><span class="ow">or</span> <span class="s1">&#39;EC&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">verkehrsmittel</span><span class="p">)</span><span class="ow">or</span> <span class="s1">&#39;HKX&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">verkehrsmittel</span><span class="p">)</span> <span class="ow">or</span> <span class="s1">&#39;EN&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">verkehrsmittel</span><span class="p">)</span><span class="ow">or</span> <span class="s1">&#39;E&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">verkehrsmittel</span><span class="p">)</span><span class="ow">or</span><span class="s1">&#39;D&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">verkehrsmittel</span><span class="p">):</span>
                                    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mittel</span><span class="p">)</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">verkehrsmittel</span><span class="p">)</span>
                            <span class="n">wogefunden</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
                            <span class="n">nichtchecken</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
                            <span class="n">gfind</span><span class="o">=</span><span class="mi">1</span>

                    <span class="k">if</span> <span class="n">gfind</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">verkehrsmittel</span><span class="p">)</span>

                    <span class="n">ptime</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
                    <span class="k">for</span> <span class="n">woo</span> <span class="ow">in</span> <span class="n">wogefunden</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">bk</span> <span class="ow">in</span> <span class="n">fahrzeug_array</span><span class="p">[</span><span class="n">woo</span><span class="p">]</span><span class="o">.</span><span class="n">uhrzeit</span><span class="p">:</span>
                            <span class="n">ptime</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">bk</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
                            <span class="n">split</span> <span class="o">=</span> <span class="n">ptime</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>

                            <span class="n">time5line</span><span class="p">[((</span><span class="nb">int</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">*</span><span class="mi">60</span><span class="p">)</span><span class="o">/</span><span class="mi">5</span><span class="p">)</span><span class="o">+</span><span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">/</span><span class="mi">5</span><span class="p">))]</span><span class="o">=</span><span class="mi">1</span>
                    <span class="k">for</span> <span class="n">bl</span> <span class="ow">in</span> <span class="n">a</span><span class="o">.</span><span class="n">uhrzeit</span><span class="p">:</span>
                        <span class="n">ptime</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">bl</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
                        <span class="n">split</span> <span class="o">=</span> <span class="n">ptime</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
                        <span class="n">time5line</span><span class="p">[((</span><span class="nb">int</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">*</span><span class="mi">60</span><span class="p">)</span><span class="o">/</span><span class="mi">5</span><span class="p">)</span><span class="o">+</span><span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">/</span><span class="mi">5</span><span class="p">))]</span><span class="o">=</span><span class="mi">1</span>
                    <span class="n">time5lines_linie</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">time5line</span><span class="p">)</span>

            <span class="n">haeufigkeit</span><span class="o">=</span><span class="n">time5lines_linie</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">haufigstelinie</span><span class="o">=</span><span class="mi">0</span>
            <span class="nb">print</span> <span class="n">haeufigkeit</span>
            <span class="k">for</span> <span class="n">zahl</span><span class="p">,</span> <span class="n">haeufig</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span> <span class="n">time5lines_linie</span><span class="p">):</span>
    <span class="c1">##            print haeufig.count(1)</span>
                <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">haeufigkeit</span><span class="p">)</span><span class="o">&lt;</span><span class="nb">int</span><span class="p">(</span><span class="n">haeufig</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)):</span>
                    <span class="n">haeufigkeit</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">haeufig</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
                    <span class="n">haufigstelinie</span><span class="o">=</span><span class="n">zahl</span>


            <span class="n">time5lines_linie2</span><span class="o">=</span><span class="p">[]</span>
            <span class="n">lines2</span><span class="o">=</span><span class="p">[]</span>

            <span class="n">time5lines_linie2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">time5lines_linie</span><span class="p">[</span><span class="n">haufigstelinie</span><span class="p">])</span>
            <span class="n">time5lines_linie</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">haufigstelinie</span><span class="p">)</span>
            <span class="n">lines2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="n">haufigstelinie</span><span class="p">])</span>
            <span class="n">lines2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Bus&quot;</span><span class="p">)</span>

            <span class="n">uui</span><span class="o">=</span><span class="p">[]</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">aaaa</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span> <span class="n">time5lines_linie</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">k</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                    <span class="n">uui</span><span class="o">=</span><span class="n">aaaa</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">uui</span><span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">add</span><span class="p">,</span> <span class="n">uui</span><span class="p">,</span> <span class="n">aaaa</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">zahle</span><span class="p">,</span> <span class="n">einzel</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span> <span class="n">uui</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">einzel</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">:</span>
                    <span class="n">uui</span><span class="p">[</span><span class="n">zahle</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>

            <span class="n">time5lines_linie2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">uui</span><span class="p">)</span>

            <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">verkehr</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">):</span>
                <span class="nb">print</span> <span class="s2">&quot;1. Ja&quot;</span>
                <span class="nb">print</span> <span class="s2">&quot;Unterschiedliche Verkehrstrager&quot;</span>
                <span class="n">style</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="n">zeichne</span><span class="p">(</span><span class="n">time5lines_verkehrstraeger</span><span class="p">,</span><span class="n">verkehr</span><span class="p">,</span><span class="n">Daten</span><span class="p">[</span><span class="n">welche</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">ziele</span><span class="p">)</span><span class="o">&lt;</span><span class="mi">7</span><span class="p">:</span>
                <span class="nb">print</span> <span class="s2">&quot;2. 6 Ziele Ja&quot;</span>
                <span class="nb">print</span> <span class="s2">&quot;unterschieden nach Fahrtziel&quot;</span>
                <span class="n">style</span> <span class="o">=</span> <span class="mi">2</span>
                <span class="n">zeichne</span><span class="p">(</span><span class="n">time5lines_ziel</span><span class="p">,</span><span class="n">ziele</span><span class="p">,</span><span class="n">Daten</span><span class="p">[</span><span class="n">welche</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span><span class="o">&lt;</span><span class="mi">7</span><span class="p">:</span>
                <span class="nb">print</span> <span class="s2">&quot;3. max 6 Linien&quot;</span>
                <span class="nb">print</span> <span class="s2">&quot;Unterscheidung nach Linie&quot;</span>
                <span class="n">style</span> <span class="o">=</span> <span class="mi">3</span>
                <span class="n">zeichne</span><span class="p">(</span><span class="n">time5lines_linie</span><span class="p">,</span><span class="n">lines</span><span class="p">,</span><span class="n">Daten</span><span class="p">[</span><span class="n">welche</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span> <span class="s2">&quot;Nein, mehr Linien&quot;</span>
                <span class="nb">print</span> <span class="s2">&quot;Alle Linien und die st√§rkste in anderer Farbe&quot;</span>
                <span class="n">style</span> <span class="o">=</span> <span class="mi">4</span>
                <span class="n">zeichne</span><span class="p">(</span><span class="n">time5lines_linie2</span><span class="p">,</span><span class="n">lines2</span><span class="p">,</span><span class="n">Daten</span><span class="p">[</span><span class="n">welche</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span>

            <span class="n">name</span> <span class="o">=</span> <span class="n">Daten</span><span class="p">[</span><span class="n">welche</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;(&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;)&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">unichr</span><span class="p">(</span><span class="mi">228</span><span class="p">),</span><span class="s1">&#39;ae&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">unichr</span><span class="p">(</span><span class="mi">246</span><span class="p">),</span><span class="s1">&#39;oe&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">unichr</span><span class="p">(</span><span class="mi">252</span><span class="p">),</span><span class="s1">&#39;ue&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">unichr</span><span class="p">(</span><span class="mi">223</span><span class="p">),</span><span class="s1">&#39;ss&#39;</span><span class="p">)</span>
            <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">name</span><span class="p">,</span> <span class="n">style</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%x</span><span class="s2">&quot;</span><span class="p">),</span> <span class="n">Daten</span><span class="p">[</span><span class="n">welche</span><span class="p">][</span><span class="mi">2</span><span class="p">]])</span>

    <span class="c1"># Variablen definieren</span>

    <span class="n">projektname</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">valueAsText</span><span class="p">)</span>
    <span class="n">haltestellen</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">p1</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">valueAsText</span>
    <span class="k">if</span> <span class="n">p1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">p1</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
        <span class="n">haltestellen</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; | &quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">p2</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">valueAsText</span>
    <span class="k">if</span> <span class="n">p2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">p1</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
        <span class="n">haltestellen</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p2</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; | &quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">p3</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">valueAsText</span>
    <span class="k">if</span> <span class="n">p3</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">p3</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
        <span class="n">haltestellen</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p3</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; | &quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>

    <span class="n">base_path</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;2_Tool&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">workspace_projekt</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span><span class="s1">&#39;3 Benutzerdefinierte Projekte&#39;</span><span class="p">,</span><span class="n">projektname</span><span class="p">,</span><span class="s1">&#39;FGDB_Definition_Projekt.gdb&#39;</span><span class="p">)</span>
    <span class="n">workspace_erreichbarkeit</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span><span class="s1">&#39;3 Benutzerdefinierte Projekte&#39;</span><span class="p">,</span><span class="n">projektname</span><span class="p">,</span><span class="s1">&#39;FGDB_Erreichbarkeit.gdb&#39;</span><span class="p">)</span>
    <span class="n">workspace_projekt_ergebnisse</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span><span class="s1">&#39;3 Benutzerdefinierte Projekte&#39;</span><span class="p">,</span><span class="n">projektname</span><span class="p">,</span> <span class="s1">&#39;Ergebnisausgabe&#39;</span><span class="p">,</span> <span class="s1">&#39;Abbildungen&#39;</span><span class="p">)</span>
    <span class="n">arcpy</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">workspace</span> <span class="o">=</span> <span class="n">workspace_projekt</span>
    <span class="n">arcpy</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">overwriteOutput</span> <span class="o">=</span> <span class="kc">True</span>


    <span class="c1"># Daten aus Skript 01 einlesen und in entsprechende Struktur bringen</span>
    <span class="n">Daten</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">rows</span> <span class="o">=</span> <span class="n">arcpy</span><span class="o">.</span><span class="n">SearchCursor</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">workspace_erreichbarkeit</span><span class="p">,</span><span class="s2">&quot;OEPNV_Haltestellen&quot;</span><span class="p">))</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
        <span class="n">Daten</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">row</span><span class="o">.</span><span class="n">IBNR</span><span class="p">,</span><span class="n">row</span><span class="o">.</span><span class="n">Distanz</span><span class="p">,</span><span class="n">row</span><span class="o">.</span><span class="n">Name</span><span class="p">,</span><span class="n">row</span><span class="o">.</span><span class="n">lon</span><span class="p">,</span> <span class="n">row</span><span class="o">.</span><span class="n">lat</span><span class="p">,</span> <span class="n">i</span><span class="p">])</span>
        <span class="n">i</span><span class="o">+=</span><span class="mi">1</span>
    <span class="k">del</span> <span class="n">i</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1">#Variable zum Sammeln und sp√§ter dann Speichern der Zwischenergebnisse</span>


    <span class="c1">#Funktionen:</span>

    <span class="n">Abfahrt2</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span><span class="n">projektname</span><span class="p">,</span><span class="n">Daten</span><span class="p">)</span>
    <span class="n">haltestellen</span> <span class="o">=</span> <span class="p">[</span><span class="n">Daten</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span> <span class="n">Daten</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span> <span class="n">Daten</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">]]</span>
    <span class="n">Daten_temp</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">haltestellen</span><span class="p">:</span>
        <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">Daten</span><span class="p">:</span>
    <span class="c1">##        print i[2]</span>
    <span class="c1">##        print n</span>
            <span class="k">if</span> <span class="n">i</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="n">n</span><span class="p">:</span>
                <span class="n">Daten_temp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Daten</span><span class="p">[</span><span class="n">b</span><span class="p">])</span>
            <span class="n">b</span><span class="o">+=</span><span class="mi">1</span>
    <span class="k">del</span> <span class="n">b</span>

    <span class="n">fahrzeug_array_b</span><span class="o">=</span><span class="n">Abfahrt</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="n">projektname</span><span class="p">,</span> <span class="n">Daten_temp</span><span class="p">)</span>
    <span class="n">erstellen_der_timelines</span><span class="p">(</span><span class="n">fahrzeug_array_b</span><span class="p">,</span><span class="n">Daten_temp</span><span class="p">)</span>



    <span class="c1">#############################################################################################################</span>
    <span class="c1"># Schritt X - Datenexport in tempor√§re .csv zur sp√§teren Abholung durch den Ergebnissammler</span>
    <span class="n">ausgabeordner</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span><span class="s1">&#39;3 Benutzerdefinierte Projekte&#39;</span><span class="p">,</span><span class="n">projektname</span><span class="p">,</span><span class="s1">&#39;Ergebnisausgabe&#39;</span><span class="p">,</span><span class="s1">&#39;Abbildungen&#39;</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">ausgabeordner</span><span class="o">+</span><span class="s2">&quot;\Haltestellen.csv&quot;</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">csvfile</span><span class="p">:</span>
        <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">csvfile</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">maxa</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">maxa</span><span class="p">:</span>
            <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;latin1&#39;</span><span class="p">),</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span> <span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;latin1&#39;</span><span class="p">)])</span>
            <span class="n">i</span> <span class="o">+=</span><span class="mi">1</span>
        <span class="k">del</span> <span class="n">writer</span><span class="p">,</span> <span class="n">csvfile</span>

    <span class="nb">print</span> <span class="s2">&quot;done&quot;</span></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">RPC</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../index.html" >Module code</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, GGR, ILS.
      Last updated on Jan 26, 2017.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.1.
    </div>
  </body>
</html>